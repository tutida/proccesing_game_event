<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>processing</title>
<script type="text/javascript" src="./js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="./js/processing.min.js"></script>
</head>

<script type="text/processing"  data-processing-target="mycanvas">

int cx, cy, r, y;
boolean fire;

void setup() {
  size(600,600);

  cx = width  / 2;
  cy = height / 2;
  r = 0;
  y = 600;
}

void draw() {
  background(0,0,0); // black
  noStroke();

  y -= 4;

  if(y>300){
    fill(random(250),random(250),random(250));
    ellipse(300,y,10,10);
  }else{
    drawFire();
  }

  if(y == 0){
    r = 0;
    y = 600;
  }
}

void mouseClicked() {
   drawFire();
}

void drawFire() {
  r += 10;
  fill(random(250),random(250),random(250));
  for( float i = 0 ; i < 360 ; i += 5 ) {
    float rad = 2 * PI * i / 360.0;
    float dx = r *  cos(rad);
    float dy = r * -sin(rad);
    ellipse(cx+dx,cy+dy,10,10);
  }

  for( float i = 0 ; i < 360 ; i += 5 ) {
    float rad = 2 * PI * i / 360.0;
    float dx = (r - 25) *  cos(rad);
    float dy = (r - 25) * -sin(rad);
    ellipse(cx+dx,cy+dy,5,5);
  }

  for( float i = 0 ; i < 360 ; i += 5 ) {
    float rad = 2 * PI * i / 360.0;
    float dx = (r - 50) *  cos(rad);
    float dy = (r - 50) * -sin(rad);
    ellipse(cx+dx,cy+dy,5,5);
  }

  for( float i = 0 ; i < 360 ; i += 5 ) {
    float rad = 2 * PI * i / 360.0;
    float dx = (r - 75) *  cos(rad);
    float dy = (r - 75) * -sin(rad);
    ellipse(cx+dx,cy+dy,5,5);
  }
}


</script>

<body>
    <canvas id="mycanvas"></canvas>
</body>
</html>